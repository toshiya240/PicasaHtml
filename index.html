<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<link rel="apple-touch-icon" href="PicasaHtml.png" />
<title>PicasaHtml</title>

<link rel="stylesheet" type="text/css" href="styles/jquery.mobile.flatui.min.css" />
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/knockout/3.1.0/knockout-min.js" type="text/javascript"></script>

<script src="scripts/app.min.js"></script>

<style type="text/css">
a:link.sig {
  color:#cc6611;
}
</style>
</head>
<body>
<div data-role="page" id="main"
    data-title="PicasaHtml" data-theme="e">
  <div data-role="header" data-position="fixed" data-theme="e">
    <a data-role="button" data-icon="flat-settings" data-iconpos="left"
        data-bind="click: showSettings">設定</a>
    <h2>PicasaHtml</h2>
    <a data-role="button" data-icon="refresh" data-iconpos="notext"
        data-bind="click: getAlbums"></a>
  </div>
  <div data-role="content">
    <div data-role="fieldcontain">
      <label for="album">アルバムを選択してください。</label>
      <select id="album" data-theme="e"
          data-bind="options: albums,
              optionsText: 'title',
              value: selectedAlbum">
      </select><br>

      <label for="max">
        取得する写真の最大枚数を入力してください。
      </label>
      <input data-theme="e" data-highlight="true"
          type="range" min="1" max="1000" step="1" id="max"
          data-bind="value: maxResults"><br>

      <label for="tag">検索するタグを入力してください。省略可能です。</label>
      <input id="tag" type="text" data-bind="value: tag"><br>

      <label for="imgmax">取得する写真の最大サイズを指定してください。</label>
      <select id="imgmax" data-theme="e"
          data-bind="options: imgmax,
              optionsText: 'name',
              value: selectedImgmax">
      </select>
    </div>
    <div data-inline="true">
      <input type="button" id="get-photos" value="Get Photos" data-theme="a"
          data-bind="click: getPhotos">
    </div>
  </div>
<div data-role="footer" data-theme="e">
  <h4>&copy; 2011-2014
    <a class="sig" href="http://twitter.com/toshiya240" target="blank">toshiya240</a></h4>
</div>

</div>

<div data-role="page" id="result" data-title="PicasaHtml" data-theme="e"> 
  <div data-role="header" data-position="fixed" data-theme="e">
    <a data-role="button" data-icon="delete"
        href="#main" data-transition="pop" data-direction="reverse">閉じる</a>
    <h2>結果</h2>
  </div>
  <div data-role="content">
    <ul data-role="listview" id="preview" data-theme="c"
        data-bind="foreach: { data: htmlArray, afterRender: afterListviewRender }">
      <li><a href="#" data-bind="html: $data, click: $root.showPhoto"></a></li>
    </ul>
    <div data-role="fieldcontain">
      <div id="safari-buttons">
        <input type="button" id="insert-to-moblogger" value="Insert to Moblogger"
            data-bind="click: insertToMoblogger">
        <input type="button" id="moblogger-pboard" value="Launch Moblogger and copy to pboard"
            data-bind="click: launchMobloggerAndCopy">
        <input type="button" id="insert-to-rowline" value="Insert to Rowline"
            data-bind="click: insertToRowline">
        <input type="button" id="send-to-texthandler" value="Send to TextHandler"
            data-bind="click: sendToTextHandler">
      </div>
      <div id="twbutton">
        <input type="button" id="insert-to-textwell" value="Insert to Textwell"
            data-bind="click: insertToTextwell">
      </div>
      <div id="source-container" data-role="collapsible" data-theme="e">
        <h3>Show HTML</h3>
        <textarea style="width:98%;height:240px;" id="ta"
            data-bind="value: html"></textarea>
      </div>
    </div>
  </div>
<div data-role="footer" data-theme="e">
  <h4>&copy; 2011-2014
    <a class="sig" href="http://twitter.com/toshiya240" target="blank">toshiya240</a></h4>
</div>

</div>

<div data-role="page" id="preview-page"
    data-title="PicasaHtml" data-theme="e"
    data-add-back-btn="true" data-back-btn-text="戻る">
  <div data-role="header" data-position="fixed" data-theme="e">
    <h2>プレビュー</h2>
  </div>
  <div data-role="content">
    <div id="img-preview">
    </div>
  </div>
<div data-role="footer" data-theme="e">
  <h4>&copy; 2011-2014
    <a class="sig" href="http://twitter.com/toshiya240" target="blank">toshiya240</a></h4>
</div>

</div>

<div data-role="page" id="conf" data-title="PicasaHtml" data-theme="e"> 
  <div data-role="header" data-position="fixed" data-theme="e">
    <a data-role="button" data-icon="check" data-bind="click: finish">保存</a>
    <h2>設定</h2>
    <a data-role="button" data-icon="delete" data-bind="click: discard">キャンセル</a>
  </div>
  <div data-role="content">
    <div data-role="fieldcontain">
      <label for="conf-userID">Picasa のユーザID<br>
        <span style="font-size:60%;color:#666;">
          Picasa のユーザID を設定してください。
        </span>
      </label>
      <input type="text" id="conf-userID" data-bind="value: userId"><br>

      <label for="format">フォーマット<br>
        <span style="font-size:60%;color:#666;">
          Preset を選択してください。<br>
          &quot;カスタム&quot; を選択すると独自のフォーマットを定義可能です。<br>
          [Copy Preset to Custom] ボタンをタップするとプリセットの内容を &quot;カスタム&quot; の値としてコピーすることができます。<br>
          &quot;カスタム&quot; 選択時は [Insert Placeholder] から写真属性のプレースホルダを挿入することができます。
        </span>
      </label>
      <select id="preset" name="preset" data-theme="e"
          data-bind="options: availableFormats,
              optionsText: 'name',
              value: selectedFormat"></select><br>
      <textarea id="format"
          data-bind="value: selectedFormat().value,
              attr: { readonly: selectedFormat().readonly }">
      </textarea><br>
      <div id="copy-preset-container"
          data-bind="visible: !customIsSelected()">
        <input type="button" id="copy-preset" value="Copy Preset to Custom"
            data-bind="click: copyPresetToCustom" />
      </div>
      <div id="placeholder-container" data-role="collapsible"
          data-theme="e" data-content-theme="e"
          data-bind="visible: customIsSelected()">
        <h3>Insert Placeholder</h3>
        <div id="placeholder" data-role="controlgroup" data-mini="true"
            data-bind="foreach: placeholders">
          <a href="#" data-role="button"
              data-bind="text: name, click: $root.insertPlaceholder"></a>
        </div>
      </div>
    </div>
  </div>
<div data-role="footer" data-theme="e">
  <h4>&copy; 2011-2014
    <a class="sig" href="http://twitter.com/toshiya240" target="blank">toshiya240</a></h4>
</div>

</div>

<div data-role="dialog" id="error-page" data-title="PicasaHtml">
  <div data-role="header" data-position="fixed" data-theme="d">
    <h2>PicasaHtml</h2>
  </div>
  <div data-role="content">
    <div id="error-msg"></div>
  </div>
</div>

</body>
</html>
